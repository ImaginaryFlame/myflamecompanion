<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter les histoires d'ImaginaryFlame</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .success {
            color: #28a745;
        }
        .error {
            color: #dc3545;
        }
        .info {
            color: #17a2b8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Ajouter les histoires d'ImaginaryFlame</h1>
        
        <div style="text-align: center;">
            <button id="ajouterBtn" onclick="ajouterToutesLesHistoires()">
                üìö Ajouter mes 2 histoires
            </button>
            <button onclick="verifierAPI()">
                üîç V√©rifier l'API
            </button>
            <button onclick="clearLog()">
                üßπ Effacer le log
            </button>
        </div>
        
        <div id="log" class="log">Pr√™t √† ajouter tes histoires ! üéâ</div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3000/api';
        const logDiv = document.getElementById('log');
        
        // Donn√©es des histoires
        const histoires = [
            {
                titre: "La Fable du H√©ros et la F√©e - Acte 1 : Il Etait Une Fois, la Conqu√™te du Tr√¥ne du Royaume de Sylvania",
                description: `[R√â√âCRITURE/CORRECTION] 

Dans un futur si lointain qu'il pourrait marquer la fin des temps, deux √¢mes que tout oppose - deux races ennemies par nature et par histoire - vont voir leurs destins se croiser. Ils ne se connaissent ni d'Adam, ni d'√àve, et pourtant, un lien ancestral les unit : une l√©gende vieille de cinq mill√©naires, grav√©e dans les √©toiles et les cendres du monde.

Face √† l'√©veil de l'√©ternel ennemi de l'humanit√©, une entit√© si redoutable qu'elle avait autrefois plong√© la cr√©ation enti√®re dans les t√©n√®bres avant d'√™tre scell√©e, ces deux √™tres doivent s'unir malgr√© leurs diff√©rences. Leur qu√™te ne sera pas seulement de repousser les t√©n√®bres, mais de d√©fier un pass√© qui les divise, pour red√©finir l'avenir d'un monde mourant.

L'espoir de toute existence repose d√©sormais entre leurs mains, li√©es par un h√©ritage qui pourrait autant les sauver que les d√©truire.

~~~

Alors qu'il venait de terrasser un √©ni√®me monstre pour retrouver l'assassin de sa m√®re, le H√©ros, par un concours de circonstances, se retrouve, enferm√©, dans les ge√¥les d'un royaume hostiles aux √™tres humains : Sylvania. 

Il fera la rencontre d'une f√©e sans ailes et sans nom qui l'aidera √† sortir de l√† et bien plus encore. Pour la remercier, il s'inscrira en tant que repr√©sentant de cette f√©e qui est, l'une des princesses de ce royaume, lors d'un tournoi pour d√©signer la prochaine reine de Sylvania.

Au cours de celui-ci, il devra faire face √† la cruaut√© des autres participants, √† la d√©tresse des n√©cessiteux et de leur repr√©sentante : Malalalivia Grave, et devra se confronter √† une secte qui veut ramener √† la vie une ancienne reine mal√©fique de Sylvania qui terrorisait le royaume fut un temps. 

Un spin-off de la Flamme Imaginaire.`,
                auteur: "ImaginaryFlame",
                source: "Wattpad",
                url_source: "https://www.wattpad.com/story/202925290-la-fable-du-h%C3%A9ros-et-la-f%C3%A9e-acte-1-il-%C3%A9tait-une"
            },
            {
                titre: "La Fable du H√©ros et la F√©e - Acte 2 : Puis vint, la Revanche des Parias",
                description: `"H√©ros usurpateurs ! Consum√©s par la rage, la haine et le p√©ch√©, vous pensiez r√©ellement √™tre les √©lus de cette piteuse proph√©tie ?! Votre minable vengeance s'arr√™te ici !"

"Sois tu es avec moi, sois tu mourras comme l'une de tes trop nombreuses ignobles m√®res, monstrueuse engeance sans nom." 

"Que le royaume de Sylvania soit condamn√© √† la damnation √©ternelle !" 

Il √©tait une fois, dans un sinistre monde o√π les √©toiles disparurent de la vo√ªte c√©leste tandis que l'apocalypse se profilait √† grands pas, le H√©ros et la F√©e, s√©par√©s mais toujours li√©s √† leur destin√©e, parcouraient le chemin menant √† leur objectif respectif.

S'alliant avec Avelilin√©lia, la F√©e esp√©rait tirer d'elle la justesse qui lui manquait pour s'attirer autant la sympathie des Basfonds que des nobles du Sanctuaire. Mais certains secrets inavouables du royaume de la For√™t des F√©es referont surface et mettront sens dessus-dessous la paix du royaume.

D'un autre c√¥t√©, √† la suite de sa d√©faite lors du tournoi, Avelilin√©lia cherchera √† trouver sa place au sein du royaume, ce qui l'am√®nera √† devenir l'un des strat√®ges du royaume et directrice de campagne de la F√©e. Toutefois, sa qu√™te d'un but noble la conduira sur une voie qui lui fera renier toutes ses convictions...

De retour dans l'un des derniers bastions de l'Homme, Vicenti, Nalo se mettra en qu√™te d'un moyen de fa√ßonner un appareil lui permettant de retrouver le N√©m√©sis. Toutefois, au cours de cette qu√™te, il percevra la voix de sa s≈ìur r√©sonner dans son esprit. Pourrait-il y avoir ne serait-ce qu'une infime possibilit√© que sa s≈ìur soit encore en vie ?

Quant √† la reine Audis√©lia, elle devra relever le d√©fi le plus monumental de son r√®gne en Sylvania, confront√©e aux tromperies de ses sujets et √† ses propres mensonges.

C'est dans cet entrem√™lement de destin√©es que nos protagonistes d√©couvriront la part la plus noire de leur √™tre qu'ils devront surpasser sinon p√©riront comme ceux qui les ont pr√©c√©d√©s...`,
                auteur: "ImaginaryFlame",
                source: "Wattpad",
                url_source: "https://www.wattpad.com/story/287182109-le-h%C3%A9ros-et-la-f%C3%A9e-acte-2-puis-vint-la-revanche"
            }
        ];
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const className = type;
            logDiv.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function clearLog() {
            logDiv.innerHTML = '';
        }
        
        async function verifierAPI() {
            log('üîç V√©rification de l\'API...', 'info');
            try {
                const response = await fetch(`${API_BASE}/histoire`);
                if (response.ok) {
                    const data = await response.json();
                    log(`‚úÖ API accessible - ${data.length} histoires trouv√©es`, 'success');
                } else {
                    log(`‚ùå Erreur API: ${response.status}`, 'error');
                }
            } catch (error) {
                log(`‚ùå Erreur r√©seau: ${error.message}`, 'error');
            }
        }
        
        async function ajouterHistoire(histoire, index) {
            log(`üìö Ajout de l'histoire ${index + 1}/2: "${histoire.titre.substring(0, 50)}..."`, 'info');
            
            try {
                const response = await fetch(`${API_BASE}/histoire`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(histoire)
                });
                
                if (response.ok) {
                    const data = await response.json();
                    log(`‚úÖ Histoire ajout√©e avec succ√®s (ID: ${data.id})`, 'success');
                    return data;
                } else {
                    const error = await response.json();
                    log(`‚ùå Erreur lors de l'ajout: ${JSON.stringify(error)}`, 'error');
                    return null;
                }
            } catch (error) {
                log(`‚ùå Erreur r√©seau: ${error.message}`, 'error');
                return null;
            }
        }
        
        async function ajouterToutesLesHistoires() {
            const btn = document.getElementById('ajouterBtn');
            btn.disabled = true;
            btn.textContent = '‚è≥ Ajout en cours...';
            
            log('üöÄ D√©but de l\'ajout des histoires d\'ImaginaryFlame...', 'info');
            
            const resultats = [];
            
            for (let i = 0; i < histoires.length; i++) {
                const resultat = await ajouterHistoire(histoires[i], i);
                resultats.push(resultat);
                
                // Pause entre chaque ajout
                if (i < histoires.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                }
            }
            
            const succes = resultats.filter(r => r !== null).length;
            log(`\nüìä R√©sultat final: ${succes}/${histoires.length} histoires ajout√©es`, 'info');
            
            if (succes === histoires.length) {
                log('üéâ Toutes tes histoires ont √©t√© ajout√©es avec succ√®s !', 'success');
                log('üîó V√©rifie sur: http://localhost:3000/api/histoire', 'info');
            } else {
                log('‚ö†Ô∏è Certaines histoires n\'ont pas pu √™tre ajout√©es.', 'error');
            }
            
            btn.disabled = false;
            btn.textContent = 'üìö Ajouter mes 2 histoires';
        }
    </script>
</body>
</html> 